# üöÄ –ü—Ä–æ—î–∫—Ç: Flask + PostgreSQL  
## –ê–Ω–∞–ª—ñ–∑ –ù–∞–¥—ñ–π–Ω–æ—Å—Ç—ñ —Ç–∞ –§—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—É –ë–∞–∑–∏ –î–∞–Ω–∏—Ö

---

## üåü –í—Å—Ç—É–ø: –©–æ —Ç–∞–∫–µ "–ù–∞–¥—ñ–π–Ω—ñ—Å—Ç—å" —É —Ü—å–æ–º—É –¥–æ–¥–∞—Ç–∫—É?

–£—è–≤—ñ—Ç—å, —â–æ –≤–∏ –∫–æ—Ä–∏—Å—Ç—É—î—Ç–µ—Å—è –±–∞–Ω–∫—ñ–≤—Å—å–∫–æ—é –∫–∞—Ä—Ç–∫–æ—é.  
–ö–æ–ª–∏ –≤–∏ –ø–ª–∞—Ç–∏—Ç–µ –∑–∞ –∫–∞–≤—É, –≤—ñ–¥–±—É–≤–∞—é—Ç—å—Å—è –¥–≤—ñ –¥—ñ—ó:

1. –ì—Ä–æ—à—ñ —Å–ø–∏—Å—É—é—Ç—å—Å—è –∑ –≤–∞—à–æ–≥–æ —Ä–∞—Ö—É–Ω–∫—É  
2. –ì—Ä–æ—à—ñ –∑–∞—Ä–∞—Ö–æ–≤—É—é—Ç—å—Å—è –∫–∞–≤‚Äô—è—Ä–Ω—ñ  

–¶—ñ –¥—ñ—ó **–Ω–µ –º–æ–∂–Ω–∞ —Ä–æ–∑–¥—ñ–ª—è—Ç–∏**. –Ø–∫—â–æ –æ–¥–Ω–µ –∑ –Ω–∏—Ö –Ω–µ —Å—Ç–∞–ª–æ—Å—è ‚Äî –≤–∏–Ω–∏–∫–∞—î –ø–æ–º–∏–ª–∫–∞.

–¢–æ–π —Å–∞–º–∏–π –ø—Ä–∏–Ω—Ü–∏–ø –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –≤ –Ω–∞—à–æ–º—É –∑–∞—Å—Ç–æ—Å—É–Ω–∫—É:  
—Ü–µ –Ω–∞–∑–∏–≤–∞—î—Ç—å—Å—è **—Ç—Ä–∞–Ω–∑–∞–∫—Ü—ñ—è**.

**–¢—Ä–∞–Ω–∑–∞–∫—Ü—ñ—è ‚Äî —Ü–µ "—Å–µ–π—Ñ".**  
–ú–∏ –∫–ª–∞–¥–µ–º–æ –≤ –Ω—å–æ–≥–æ –∫—ñ–ª—å–∫–∞ –¥—ñ–π —Ç–∞ –∞–±–æ –∑–∞–º–∏–∫–∞—î–º–æ —Å–µ–π—Ñ (COMMIT ‚Äî —É—Å–µ –≤–∏–∫–æ–Ω–∞–Ω–æ),  
–∞–±–æ –≤—ñ–¥–∫—Ä–∏–≤–∞—î–º–æ –π–æ–≥–æ –Ω–∞–∑–∞–¥ (ROLLBACK ‚Äî —Å–∫–∞—Å—É–≤–∞–Ω–Ω—è).

–°–∞–º–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü—ñ—ó —Ä–æ–±–ª—è—Ç—å –Ω–∞—à –∑–∞—Å—Ç–æ—Å—É–Ω–æ–∫ **–Ω–∞–¥—ñ–π–Ω–∏–º**  
—ñ –¥–µ–º–æ–Ω—Å—Ç—Ä—É—é—Ç—å –º–æ–∂–ª–∏–≤–æ—Å—Ç—ñ PostgreSQL.

---

## üéØ –ú–µ—Ç–∞ —Ç–∞ –ö–æ–Ω—Ü–µ–ø—Ü—ñ—è –ü—Ä–æ—î–∫—Ç—É

–¶–µ–π –≤–µ–±–∑–∞—Å—Ç–æ—Å—É–Ω–æ–∫ –¥–µ–º–æ–Ω—Å—Ç—Ä—É—î:

- –Ω–∞–¥—ñ–π–Ω—ñ—Å—Ç—å —Ä–µ–ª—è—Ü—ñ–π–Ω–æ—ó –ë–î  
- —Ü—ñ–ª—ñ—Å–Ω—ñ—Å—Ç—å –¥–∞–Ω–∏—Ö  
- ACID-–ø—Ä–∏–Ω—Ü–∏–ø–∏  
- –≤–∏–Ω–µ—Å–µ–Ω–Ω—è –±—ñ–∑–Ω–µ—Å-–ª–æ–≥—ñ–∫–∏ –Ω–∞ —Ä—ñ–≤–µ–Ω—å SQL-—Å–µ—Ä–≤–µ—Ä–∞  

### –û—Å–Ω–æ–≤–Ω—ñ –∑–∞–≤–¥–∞–Ω–Ω—è:

- –ö–µ—Ä—É–≤–∞–Ω–Ω—è –∞—Ç–æ–º–∞—Ä–Ω–∏–º–∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü—ñ—è–º–∏ —É Python  
- –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è SQL-—Ñ—É–Ω–∫—Ü—ñ–π —ñ —Ç—Ä–∏–≥–µ—Ä—ñ–≤  
- –ê—É–¥–∏—Ç —É—Å—ñ—Ö –∫—Ä–∏—Ç–∏—á–Ω–∏—Ö –∑–º—ñ–Ω —É –ë–î  

---

## üõ†Ô∏è –¢–µ—Ö–Ω–æ–ª–æ–≥—ñ—á–Ω–∏–π –°—Ç–µ–∫

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –¢–µ—Ö–Ω–æ–ª–æ–≥—ñ—è | –†–æ–ª—å |
|----------|------------|------|
| **Backend** | Python 3 (Flask) | –ú–∞—Ä—à—Ä—É—Ç–∏, HTTP, —Ç—Ä–∞–Ω–∑–∞–∫—Ü—ñ—ó |
| **Database** | PostgreSQL | –ó–±–µ—Ä—ñ–≥–∞–Ω–Ω—è, —Ç—Ä–∏–≥–µ—Ä–∏, ACID |
| **Driver** | psycopg2 | –ü—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –∑ Python |
| **Frontend** | HTML5 / CSS3 | –Ü–Ω—Ç–µ—Ä—Ñ–µ–π—Å |

---

## üîí –†–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–∞ –õ–æ–≥—ñ–∫–∞ —Ç–∞ –ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞

### I. –¢—Ä–∞–Ω–∑–∞–∫—Ü—ñ—ó –Ω–∞ —Ä—ñ–≤–Ω—ñ –¥–æ–¥–∞—Ç–∫—É (ACID)

–£—Å—ñ –∫—Ä–∏—Ç–∏—á–Ω—ñ –æ–ø–µ—Ä–∞—Ü—ñ—ó –≤–∏–∫–æ–Ω—É—é—Ç—å—Å—è —á–µ—Ä–µ–∑:

```python
try:
    conn.commit()
except:
    conn.rollback()
üìå –°—Ü–µ–Ω–∞—Ä—ñ—ó —Ç—Ä–∞–Ω–∑–∞–∫—Ü—ñ–π
–°—Ü–µ–Ω–∞—Ä—ñ–π	–ú–µ—Ö–∞–Ω—ñ–∑–º	–ì–∞—Ä–∞–Ω—Ç—ñ—è
–°—Ç–≤–æ—Ä–µ–Ω–Ω—è –ø–æ—Å—Ç–∞ (/add)	INSERT –ø–æ—Å—Ç–∞ + INSERT —É –ª–æ–≥	–Ø–∫—â–æ –ª–æ–≥ –Ω–µ –∑–∞–ø–∏—Å–∞–≤—Å—è ‚Üí –ø–æ—Å—Ç –ù–ï —Å—Ç–≤–æ—Ä—é—î—Ç—å—Å—è
–í–∏–¥–∞–ª–µ–Ω–Ω—è (/delete/<id>)	–ê—Ä—Ö—ñ–≤–∞—Ü—ñ—è ‚Üí –≤–∏–¥–∞–ª–µ–Ω–Ω—è ‚Üí –ª–æ–≥	–ù–µ–º–æ–∂–ª–∏–≤–æ –≤—Ç—Ä–∞—Ç–∏—Ç–∏ –ø–æ—Å—Ç –±–µ–∑ –∞—Ä—Ö—ñ–≤—É
–†–µ–∞–∫—Ü—ñ—ó (/react/<id>)	UPDATE –ª—ñ—á–∏–ª—å–Ω–∏–∫–∞ + INSERT —É –ª–æ–≥	–õ–∞–π–∫/–¥–∏–∑–ª–∞–π–∫ –∑–∞–≤–∂–¥–∏ —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–æ–≤–∞–Ω–∏–π —ñ–∑ –∂—É—Ä–Ω–∞–ª–æ–º

II. –õ–æ–≥—ñ–∫–∞ –Ω–∞ —Ä—ñ–≤–Ω—ñ PostgreSQL
1. –§—É–Ω–∫—Ü—ñ—è: get_post_rating(likes, dislikes)
–¢–∏–ø: SQL / PL/pgSQL

–ü–æ–≤–µ—Ä—Ç–∞—î —Ä–µ–π—Ç–∏–Ω–≥ –ø–æ—Å—Ç–∞ (–ª–∞–π–∫–∏ ‚àí –¥–∏–∑–ª–∞–π–∫–∏)

–ü—Ä–∏–∫–ª–∞–¥ –≤–∏–∫–ª–∏–∫—É:

sql
–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥
SELECT get_post_rating(likes, dislikes) AS rating
FROM posts;
2. –¢—Ä–∏–≥–µ—Ä: –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è updated_at
–¢—Ä–∏–≥–µ—Ä: BEFORE UPDATE

–§—É–Ω–∫—Ü—ñ—è: update_changetimestamp_column()

–ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –æ–Ω–æ–≤–ª—é—î –ø–æ–ª–µ updated_at –ø—Ä–∏ –∑–º—ñ–Ω—ñ –ø–æ—Å—Ç–∞

–ñ–æ–¥–Ω–æ–≥–æ –∫–æ–¥—É –≤ Flask ‚Äî –≤—Å–µ —Ä–æ–±–∏—Ç—å PostgreSQL.

III. –°—Ö–µ–º–∞ –î–∞–Ω–∏—Ö
–¢–∞–±–ª–∏—Ü—è	–ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è	–û—Å–æ–±–ª–∏–≤–æ—Å—Ç—ñ
posts	–ê–∫—Ç–∏–≤–Ω—ñ –ø—É–±–ª—ñ–∫–∞—Ü—ñ—ó	id, likes, dislikes, updated_at (–æ–Ω–æ–≤–ª—é—î —Ç—Ä–∏–≥–µ—Ä)
audit_log	–ñ—É—Ä–Ω–∞–ª –ø–æ–¥—ñ–π	action, timestamp
archives	–ê—Ä—Ö—ñ–≤ –≤–∏–¥–∞–ª–µ–Ω–∏—Ö –ø–æ—Å—Ç—ñ–≤	original_id, deleted_at

üíª –Ü–Ω—Å—Ç—Ä—É–∫—Ü—ñ—ó –ø–æ –†–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—é
1. –ü–µ—Ä–µ–¥—É–º–æ–≤–∏
Python 3.x

PostgreSQL + pgAdmin

–ê–∫—Ç–∏–≤–Ω–∏–π venv

2. –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π
bash
–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥
pip install flask psycopg2
3. –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –ë–î
–£ —Ñ–∞–π–ª—ñ main.py:

python
–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥
DB_NAME = "flask_blog"
DB_USER = "postgres"
DB_PASS = "–í–ê–®_–ü–ê–†–û–õ–¨"
4. –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä—É
bash
–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥
python main.py
–ü–µ—Ä–µ–π–¥—ñ—Ç—å —É –±—Ä–∞—É–∑–µ—Ä—ñ:

cpp
–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥
http://127.0.0.1:5000/
–ö—Ä–æ–∫ —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—ó
–ù–∞—Ç–∏—Å–Ω—ñ—Ç—å:

scss
–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥
‚ö† –°–∫–∏–Ω—É—Ç–∏ –±–∞–∑—É –¥–∞–Ω–∏—Ö (Reset)
–¶–µ —Å—Ç–≤–æ—Ä–∏—Ç—å:

—Ç–∞–±–ª–∏—Ü—ñ

—Ñ—É–Ω–∫—Ü—ñ—ó

—Ç—Ä–∏–≥–µ—Ä–∏

–ø–æ—á–∞—Ç–∫–æ–≤—É —Å—Ç—Ä—É–∫—Ç—É—Ä—É –¥–∞–Ω–∏—Ö

